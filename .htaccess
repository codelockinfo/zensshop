
# Increase Upload Limits for Video
php_value upload_max_filesize 128M
php_value post_max_size 128M
php_value memory_limit 256M
php_value max_execution_time 300
php_value max_input_time 300

<IfModule mod_rewrite.c>
    Options -MultiViews
    RewriteEngine On
    # Adjust RewriteBase: Use /zensshop/ for local WAMP Www directory
    # IMPORTANT: Change this to / if your live site is at the root domain (e.g. zensshop.com)
    RewriteBase /zensshop/
    ErrorDocument 404 /zensshop/not-found

    # Custom Clean URLs (Masking)
    RewriteRule ^admin/category$ admin/homepage_categories_settings.php [L,QSA]
    RewriteRule ^admin/banner$ admin/banner_settings.php [L,QSA]
    RewriteRule ^admin/features$ admin/features_settings.php [L,QSA]
    RewriteRule ^admin/footer$ admin/footer_info.php [L,QSA]
    RewriteRule ^admin/reset$ admin/forgot-password.php [L,QSA]
    RewriteRule ^admin/header$ admin/header_info.php [L,QSA]
    RewriteRule ^admin/products/?$ admin/homepage_products_settings.php [L,QSA]
    RewriteRule ^admin/shorts$ admin/homepage_videos_settings.php [L,QSA]
    RewriteRule ^admin/menu$ admin/menu_settings.php [L,QSA]
    RewriteRule ^admin/newsletter$ admin/newsletter_settings.php [L,QSA]
    RewriteRule ^admin/philosophy$ admin/philosophy_settings.php [L,QSA]
    RewriteRule ^admin/offers$ admin/special_offers_settings.php [L,QSA]
    RewriteRule ^admin/special-page$ admin/settings.php [L,QSA]
    RewriteRule ^admin/settings$ admin/system-settings.php [L,QSA]
    
    # Blog Detail Page
    RewriteRule ^blog/([a-zA-Z0-9-_]+)$ blog-post.php?slug=$1 [QSA,L]

    # 1. Externally redirect /file.php to /file (Client Request -> Browser URL change)
    # This ensures that even if code links to 'contact.php', the user sees 'contact'
    # Exclude POST requests to prevent 405 errors on form submission (preserving POST data)
    RewriteCond %{REQUEST_METHOD} !POST
    RewriteCond %{THE_REQUEST} \s/+(.+?)\.php[\s?] [NC]
    RewriteRule ^ /%1 [R=301,L,NE]

    # 2. Internally rewrite extensionless URLs to .php files (Server internal processing)
    # This allows the server to find 'contact.php' when 'contact' is requested
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}.php -f
    RewriteRule ^([^\.]+)$ $1.php [NC,L]

    # 3. Don't rewrite actual files or directories
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    
    # 4. Dynamic Router - Check if it's a custom page, blog, or landing page
    # This will route to router.php which will determine the correct handler
    RewriteRule ^([a-zA-Z0-9-_]+)$ router.php?slug=$1 [QSA,L]
</IfModule>